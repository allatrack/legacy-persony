-------------------------------------------------------------------------------

УТИЛІТИ ДЛЯ ЧИТАННЯ БІОГРАФІЙ

-------------------------------------------------------------------------------

Набір утиліт, що слугує для перетворення записаних у текстовому форматі (чи у форматі M$ Word) біографій у формат JSON.

Формат опису життєпису персони задокументовано тут:
https://docs.google.com/document/d/1Mmc2TTa0HVroy6fC4R6iZ6Dx9w4zcttTBE0mGnyIvlY/edit

Приклади можна подивитися тут:
https://drive.google.com/folderview?id=0B_B6nEGrtErMY2xhdmdtRHlJUTA&usp=sharing

Утиліти працюють із текстовим представленням цих документів. У цьому текстовому представленні кожен абзац повинен даватися рядком. Також, підримується специфічне представлення гіперпопосиланнь, яке продукує catdoc.

Текстове представлення документів можна отримати декількома шляхами:
1) Експортом документу у текстовий формат за допомогою Google Docs
2) Утилітою catdoc

Встановити catdoc у Debian-подібних системах:
> apt-get install catdoc
Створити файл Життєпис.txt:
> catdoc -w Життєпис.doc > Життєпис.txt
Зверніть увагу на ключ -w!

3) Утилітою docx2txt

Встановити docx2txt у Debian-подібних системах:
> apt-get install docx2txt
Створити файл Життєпис.txt:
> docx2txt Життєпис.doc

-------------------------------------------------------------------------------
Залежності
-------------------------------------------------------------------------------

Утиліти потребують модуль cyr2url.
> export PYTHONPATH=/репозиторії/persony.info/utils

-------------------------------------------------------------------------------
catdoc2persdesc
-------------------------------------------------------------------------------

Допоміжна утиліта, що видає інформацію із шапки формату опису життєпису.

Використання:
./catdoc2persdsc -name | -fullname-url | -surname-url | -fullname | -brief

Зчитує текстове представлення життєпису із стандартного входу. У стандартний вихід записує задані параметром командного рядку дані про персону.

Ключі командного рядку:

-name
Видати ім’я персони у вигляді Ім’я Призвіще.

-fullname
Видати повне ім’я персони, у вигляді Призвіще Ім’я По-батькові

-fullname-url
Видати повне ім’я у тому ж форматі, але транслітероване для використання в URL.

-surname-url
Видати призвіще персони, транслітероване для URL.

-brief
Видати короткий опис персони. 

-photo
Видати посилання на фото персони.

Приклади використання:

> catdoc2persdsc -fullname < "Анатолій Гриценко.txt"
Гриценко Анатолій Степанович
> catdoc naiem.doc | catdoc2persdsc -fullname-url
najjem_mustafa

-------------------------------------------------------------------------------
catdoc2jsonII
-------------------------------------------------------------------------------

Зчитує із стандартного входу життєпис у текстовому форматі. На стандартний виход виводить повний опис персони у форматі JSON.

Ключі командного рядка:
	-local_photo
	У поле image кожної події у JSONі записується транслітероване cyr2url призвіще персони, а не посилання на картинку, яке вказується у .doc-файлі

	-html
	Опис події транслюється із PML у HTML і в такому вигляді дається у полі description події у JSONі 

Приклади використання:
	docx2txt Життєпис.docx - | catdoc2jsonII > Життєпис.json
	catdoc2json < Життєпис.txt > Життєпис.json

-------------------------------------------------------------------------------

Приклади використання утиліт в парі:

Перетворити всі життєписи у текстовому форматі на JSONи. Назви файлів із JSONом задати транслітерованим призвіщем:

 for i in *.txt; do
 	echo -n Оброблюється $i... ; 
 	./catdoc2jsonII < "$i" >  `./catdoc2persdsc -surname-url < "$i"`.json;
 	echo є!
 done
